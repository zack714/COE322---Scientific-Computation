#include <iostream>
using std::cout;
#include <functional>
using std::function;

double newton_root( function< double(double) > f,
                    function< double(double) > deriv ) {

  // find the square root of two
  // start somewhere
  double current_x = 10000000.;
  // while the function in the current value is too large keep looping
  double function_value = f(current_x);
  for ( int iteration_count=0; ; ++iteration_count ) {
    // update current x
    current_x -= f(current_x) / deriv(current_x);
    // calcute new function value
    function_value = f(current_x);
    if ( std::abs(function_value)<1.e-5 ) {
      // cout << "Function is " << f(current_x) << " at " << current_x <<
      //        " in iteration " << iteration_count << '\n';
      break;
    }
  }
  return current_x;
}
